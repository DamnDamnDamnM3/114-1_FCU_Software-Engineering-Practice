<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteBite - UI 整合展示</title>
    <!-- 引入 Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* 顏色變數定義 */
        :root {
            --primary-blue: #002FA7;
            --gray-bg: #E9E9E9;
            --white: #FFFFFF;
            --text-dark: #333;
            /* 字體使用預設 */
            --font-serif: Georgia, 'Times New Roman', Times, serif; /* for logo */
            --font-sans: Arial, Helvetica, sans-serif; /* for body */
        }

        /* 全域基本樣式 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-sans);
            color: var(--text-dark);
        }

        .container {
            max-width: 1000px; /* 桌面固定寬度 */
            margin: 20px auto;
            padding: 0 20px;
        }

        /* --- 導覽列 (Navbar) --- */
        .navbar {
            background-color: var(--primary-blue);
            color: var(--white);
            display: flex;
            /* 保持 Logo 和 User Icon 在 40px padding 邊界內 */
            justify-content: space-between; 
            align-items: center;
            padding: 0 40px; /* 左右邊距 40px */
            height: 80px;
        }

        .logo-container {
            width: 150px;
            height: 100%;
            display: flex;
            align-items: center;
            overflow: hidden;
            flex-shrink: 0; 
        }                                                                                                                                   

        .logo-img {
            height: 100%;
            object-fit: contain;
            width: auto;
            background-color: var(--primary-blue); 
        }

        .nav-links {
            display: flex;
            flex-grow: 1; 
            justify-content: flex-end; /* 讓連結靠右對齊 (置右) */
            gap: 150px; /* 連結彼此之間的間距 */
            height: 100%;
            padding: 0 50px; /* 新增內邊距，將連結與 User Icon 分開，並讓連結整體偏左一點 */
        }
        
        .nav-item {
            color: var(--white);
            text-decoration: none;
            font-size: 1.25em;
            padding: 25px 0;
            position: relative;
            cursor: pointer;
        }

        .nav-item.selected {
            font-weight: bold;
        }

        .nav-item.selected::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background-color: var(--white);
        }

        .user-icon {
            flex-shrink: 0;
            display: flex;
            align-items: center;
        }

        .user-icon i {
            font-size: 1.8em;
        }

        /* --- 圓角 16px (統一規格) --- */
        .search-input-group, .btn, .filter-section, .filter-btn, .store-card, 
        .store-hero img, .menu-card, .map-placeholder, .calendar-widget, 
        .meal-card-btn, .food-entry, .diet-input-form, .favorite-filter .filter-input-group {
            border-radius: 16px; 
        }

        /* --- 輔助類別 --- */
        .page-section {
            display: none; /* 預設隱藏所有頁面，透過 JS 切換 */
        }
        .page-section.active {
            display: block;
        }
        .primary-color {
            color: var(--primary-blue) !important;
        }
        .btn-primary { 
            background-color: var(--primary-blue); 
            color: var(--white); 
            font-weight: bold; 
        }
        .btn-secondary {
            background-color: var(--gray-bg);
            color: var(--primary-blue);
            font-weight: bold;
            border: 1px solid var(--primary-blue);
        }
        .btn-danger {
            background-color: #dc3545;
            color: var(--white);
            font-weight: bold;
        }
        .btn { 
            padding: 10px 30px; 
            border: none; 
            font-size: 1em; 
            cursor: pointer; 
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- 搜尋頁 (Frame 1) 樣式 --- */

        .search-bar-section {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            align-items: center;
        }
        .search-input-group {
            flex-grow: 1;
            display: flex;
            align-items: center;
            background-color: var(--gray-bg);
            padding: 10px 25px;
        }
        .search-input-group i { color: #888; font-size: 1.1em; }
        .search-input-group input { flex-grow: 1; border: none; background: none; font-size: 1em; padding: 0 10px; outline: none;}

        /* 重置按鈕容器調整 */
        .filter-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
        }
        .filter-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-section h3 { color: var(--primary-blue); font-size: 1.1em; }
        .vegetarian-toggle { display: flex; align-items: center; gap: 10px; font-size: 0.9em; }
        
        #reset-filters {
            padding: 5px 10px;
            font-size: 0.85em;
            background-color: var(--white);
            color: var(--primary-blue);
            border: 1px solid var(--primary-blue);
            border-radius: 16px;
            cursor: pointer;
            transition: background-color 0.1s;
        }
        #reset-filters:hover {
            background-color: var(--gray-bg);
        }


        /* 類別按鈕容器 - 採用 Grid 佈局實現均勻分佈 */
        .category-filters { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); 
            gap: 10px; 
            margin-bottom: 20px; 
            border: 1px solid var(--primary-blue); 
            padding: 10px; 
            border-radius: 16px; 
        }

        .price-filters { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 20px; }
        .price-title { margin-top: 15px; margin-bottom: 10px !important; }

        /* filter-btn: 通用設定 */
        .filter-btn {
            height: 36px; /* 固定高度 */
            display: flex; 
            justify-content: center;
            align-items: center;
            padding: 0; 
            
            border: 1px solid var(--primary-blue);
            font-size: 1em; /* 統一字體大小 */
            cursor: pointer;
            transition: all 0.2s;
            background-color: var(--gray-bg);
            color: var(--primary-blue);
        }
        .filter-btn.selected {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        /* --- 價格按鈕專用樣式 (統一為 16px 圓角矩形，移除粗體) --- */
        .price-filters .filter-btn {
            padding: 10px 20px; 
            height: auto; 
            font-size: 1em; 
            border-radius: 16px !important; 
        }

        /* 價格按鈕：未選中 (灰底藍框) */
        .price-filters .filter-btn:not(.selected) {
            background-color: var(--gray-bg);
            border: 1px solid var(--primary-blue);
        }

        /* 價格按鈕：選中狀態 (藍底白字) */
        .price-filters .filter-btn.selected {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
        }


        .store-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .store-card {
            text-decoration: none;
            color: inherit;
            display: block;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .store-card img { width: 100%; height: 180px; object-fit: cover; }
        .store-info { display: flex; justify-content: space-between; align-items: center; padding: 10px 10px 0; }
        .store-name { font-weight: bold; color: var(--text-dark); font-size: 1.1em; } /* 保持店名粗體 */
        .distance { font-size: 0.9em; color: #666; }
        .store-rating { display: flex; justify-content: space-between; padding: 0 10px 10px; font-size: 0.9em; }
        .stars { color: #FFC107; } /* 確保星星是黃色 */


        /* 素食切換開關 (Toggles) */
        .switch { position: relative; display: inline-block; width: 40px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px;}
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;}
        input:checked + .slider { background-color: var(--primary-blue); }
        input:checked + .slider:before { transform: translateX(16px); }


        /* --- 店家詳情頁 (Frame 2) 樣式 --- */
        .store-hero img { width: 100%; max-height: 400px; object-fit: cover; margin-bottom: 20px; }
        .store-details { margin-bottom: 30px; }
        
        /* 新增樣式：讓 ID 顯示為大、粗、黑色的標題 */
        #detail-description { 
            font-size: 1.5em; /* 字體加大 */
            font-weight: bold; /* 字體加粗 */
            color: var(--text-dark); /* 黑色/深灰 */
            margin-bottom: 20px; 
            line-height: 1.3;
        }

        .store-details p { margin-bottom: 10px; line-height: 1.4; color: #666;} /* 預防其他 p 標籤被影響 */
        .store-meta { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            margin-bottom: 20px; 
        }
        .rating-stars { color: #FFC107; font-size: 1.2em; }
        .price-meta { font-size: 1.2em; font-weight: bold; color: #666; }
        
        /* 追蹤圖標樣式 */
        .follow-icon {
            margin-left: auto; /* 推到最右邊 */
            font-size: 2em; /* 讓愛心大一點，作為獨立按鈕 */
            color: var(--primary-blue); /* 預設顏色 */
            cursor: pointer;
            transition: color 0.1s;
        }
        .follow-icon:hover {
            color: #ff4500; /* 懸停效果 */
        }
        .follow-icon.followed {
            color: #ff4500; /* 實心後的顏色 */
        }


        .menu-preview h4 { margin-bottom: 15px; font-size: 1.2em; color: var(--primary-blue); }
        .menu-cards { display: flex; gap: 20px; margin-bottom: 40px; }
        .menu-card {
            width: 33%;
            border: 1px solid var(--gray-bg);
            overflow: hidden;
            text-align: center;
        }
        .menu-card img { width: 100%; height: 150px; object-fit: cover; }
        .menu-card p { padding: 5px; font-weight: bold; }
        .menu-card span { display: block; padding-bottom: 10px; color: var(--primary-blue); font-weight: bold; }

        .map-section h4 { margin-bottom: 15px; font-size: 1em; color: #666; }
        .map-placeholder { width: 100%; height: 300px; background-color: #f0f0f0; border: 1px solid #ccc; }


        /* --- 我的飲食頁 (Frame 3/5) 樣式 --- */

        .diet-layout { display: flex; gap: 40px; }
        .diet-main-content { flex-grow: 1; }
        .diet-sidebar { width: 300px; }

        /* 日曆 */
        .calendar-widget { margin-bottom: 40px; border: 1px solid var(--gray-bg); padding: 15px; text-align: center; }
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-weight: bold; }
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; font-size: 0.9em; }
        .cal-day { padding: 8px 0; border-radius: 50%; cursor: pointer; }
        .cal-weekday { font-weight: bold; color: #999; }
        .cal-day.selected { background-color: var(--primary-blue); color: var(--white); font-weight: bold; }
        .cal-day.not-in-month { color: #ccc; }

        /* 餐次輸入區 */
        .meal-input-section { display: flex; flex-direction: column; gap: 15px; margin-bottom: 40px; }
        .meal-card-btn {
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border: 1px solid var(--primary-blue);
            background-color: var(--white);
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--primary-blue);
        }
        .meal-card-btn span:last-child { color: #666; font-weight: normal; font-size: 0.9em;}
        .meal-card-btn i { font-size: 1.2em; }

        /* 營養素總覽 */
        .nutrient-summary h3 { margin-bottom: 15px; font-size: 1em; color: var(--primary-blue); }
        .nutrient-pills { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; margin-bottom: 15px; }
        .pill-label { background-color: var(--primary-blue); color: var(--white); padding: 5px 10px; border-radius: 20px; font-size: 0.9em; text-align: center; }
        .summary-values {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            text-align: center;
            border-bottom: 1px solid var(--gray-bg);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .summary-value p:first-child { font-weight: bold; font-size: 1.2em; color: var(--primary-blue); }
        .summary-value p:last-child { font-size: 0.8em; color: #666; }

        /* 飲食細節 */
        .food-entry {
            border: 1px solid var(--gray-bg);
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .entry-title { font-weight: bold; color: var(--primary-blue); }
        .entry-nutrients {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            text-align: center;
            font-size: 0.9em;
        }
        .entry-nutrient p:first-child { font-weight: bold; }
        .entry-nutrient p:last-child { font-size: 0.8em; color: #666; }

        /* 飲食輸入表單 (Frame 5) */
        .diet-input-form .nutrient-pills {
            grid-template-columns: 2fr repeat(6, 1fr); 
        }
        .diet-input-form .nutrient-pills .pill-label:first-child {
            text-align: left; 
            padding-left: 10px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 2fr repeat(6, 1fr); 
            gap: 10px;
            margin-bottom: 20px;
        }
        .input-row input {
            padding: 8px 10px;
            border: 1px solid #ccc;
            font-size: 1em;
            text-align: center;
        }
        .input-row input:first-child {
            text-align: left;
        }

        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            align-items: center;
        }
        .action-buttons .spacer {
            flex-grow: 1;
        }

        /* --- 收藏列表頁 (Frame 4) 樣式 --- */

        .favorite-filter {
            margin-bottom: 30px;
        }
        .favorite-filter .filter-input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 1px solid var(--gray-bg);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        }
        .favorite-filter label {
            font-weight: bold;
            color: var(--primary-blue);
            white-space: nowrap;
        }
        .favorite-filter select {
            padding: 8px 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
            min-width: 120px;
        }
        .large-filter-input {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="logo-container">
            <img src="logo.png" alt="ByteBite Logo" class="logo-img">
        </div>
        <nav class="nav-links">
            <a href="#" class="nav-item" data-page="search-page" id="nav-search">搜尋</a>
            <a href="#" class="nav-item" data-page="diet-page" id="nav-diet">我的飲食</a>
            <a href="#" class="nav-item" data-page="favorite-page" id="nav-favorite">收藏</a>
        </nav>
        <div class="user-icon">
            <i class="fa-solid fa-user"></i>
        </diV>
    </header>
    
    <main class="container">
        <!-- ======================================================= -->
        <!-- 1. 搜尋頁面 (Frame 1) -->
        <!-- ======================================================= -->
        <section class="page-section active" id="search-page">
            <div class="search-bar-section">
                <div class="search-input-group">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" placeholder="Search">
                    <i class="fa-solid fa-microphone"></i>
                </div>
                <button class="btn btn-primary">查詢</button>
            </div>

            <section class="filter-section">
                <div class="filter-header">
                    <h3>篩選</h3>
                    <!-- 素食開關與重置按鈕容器 -->
                    <div class="filter-controls">
                        <!-- 重置按鈕已移到素食開關的左邊 -->
                        <button id="reset-filters">重置</button>
                        <div class="vegetarian-toggle">
                            <span>素食</span>
                            <label class="switch">
                                <input type="checkbox" id="vegetarian-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- 類別按鈕清單 (已使用 Grid 佈局修正均勻分佈問題) -->
                <div class="category-filters">
                    <button class="filter-btn">日式</button>
                    <button class="filter-btn">台式</button>
                    <button class="filter-btn">美式</button>
                    <button class="filter-btn">韓式</button>
                    <button class="filter-btn">義式</button>
                    <button class="filter-btn">泰式</button>
                    <button class="filter-btn">港式</button>
                    <button class="filter-btn">火鍋</button>
                    <button class="filter-btn">速食</button>
                    <button class="filter-btn">健康</button>
                    <button class="filter-btn">飲料</button>
                    <button class="filter-btn">早餐</button>
                    <button class="filter-btn">宵夜</button>
                    <button class="filter-btn">便當</button>
                    <button class="filter-btn">小吃</button>
                    <button class="filter-btn">甜點</button>
                    <button class="filter-btn">麵食</button>
                    <button class="filter-btn">輕食</button>
                    <button class="filter-btn">炸雞</button>
                    <button class="filter-btn">粥</button>
                </div>

                <h3 class="price-title">價格</h3>
                <div class="price-filters">
                    <!-- 移除預設選中狀態，讓它可以都不選 -->
                    <button class="filter-btn">$</button>
                    <button class="filter-btn">$$</button>
                    <button class="filter-btn">$$$</button>
                    <button class="filter-btn">$$$$</button>
                </div>
            </section>

            <!-- 店家列表容器 (將由 JS 填充) -->
            <section class="store-list" id="store-list-container">
                <!-- JS 將在此處插入動態生成的店家卡片 -->
            </section>
        </section>

        <!-- ======================================================= -->
        <!-- 2. 店家詳情頁 (Frame 2) - 內容將由 JS 動態填充 -->
        <!-- ======================================================= -->
        <section class="page-section" id="store-detail-page">
            <section class="store-hero">
                <img id="detail-hero-img" src="placeholder-store-4.jpg" alt="店家主視覺">
            </section>

            <section class="store-details">
                <p id="detail-description">店家資訊將動態載入。</p>
                <div class="store-meta">
                    <span id="detail-rating-stars" class="rating-stars"></span>
                    <span id="detail-price-meta" class="price-meta"></span>
                    <span id="detail-distance" class="distance"></span>
                    <!-- 追蹤圖標: 預設空心愛心 (已刪除按鈕和文字，只保留圖標作為按鈕) -->
                    <i class="fa-regular fa-heart follow-icon" id="follow-icon"></i>
                </div>
            </section>

            <section class="menu-preview">
                <h4>你可能喜歡 (菜單預覽)</h4>
                <div id="detail-menu-cards" class="menu-cards">
                    <!-- JS 將在此處插入菜單卡片 -->
                </div>
            </section>

            <section class="map-section">
                <h4 id="detail-address"></h4>
                <div class="map-placeholder"></div>
            </section>
        </section>

        <!-- ======================================================= -->
        <!-- 3. 我的飲食頁 (Frame 3 & 5) -->
        <!-- ======================================================= -->
        <section class="page-section" id="diet-page">
            <div class="diet-layout">
                <div class="diet-sidebar">
                    <div class="calendar-widget">
                        <!-- 日曆內容略 -->
                        <div class="cal-header">
                            <i class="fa-solid fa-chevron-left"></i>
                            <span>Sep 2025</span>
                            <i class="fa-solid fa-chevron-right"></i>
                        </div>
                        <div class="cal-grid">
                            <span class="cal-weekday">Su</span><span class="cal-weekday">Mo</span><span class="cal-weekday">Tu</span><span class="cal-weekday">We</span><span class="cal-weekday">Th</span><span class="cal-weekday">Fr</span><span class="cal-weekday">Sa</span>
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span>
                            <span>8</span><span class="cal-day selected">9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span>
                            <span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span>
                        </div>
                    </div>
                </div>

                <div class="diet-main-content">
                    <!-- 餐次輸入區 -->
                    <div class="meal-input-section">
                        <button class="meal-card-btn" data-meal="lunch" onclick="toggleForm('diet-form')">
                            <span>午餐</span>
                            <span>已攝取：約 530 大卡</span>
                            <i class="fa-solid fa-plus"></i>
                        </button>
                        <button class="meal-card-btn" data-meal="dinner"><span>晚餐</span><span>已攝取：約 0 大卡</span><i class="fa-solid fa-plus"></i></button>
                    </div>

                    <!-- 飲食輸入表單 (Frame 5) - 預設隱藏，點擊餐次卡片後顯示/隱藏 -->
                    <section class="diet-input-form" id="diet-form" style="display: none; margin-bottom: 40px;">
                        <div class="nutrient-pills">
                            <span class="pill-label">食物</span>
                            <span class="pill-label">熱量</span><span class="pill-label">碳水化合物</span>
                            <span class="pill-label">蛋白質</span><span class="pill-label">脂肪</span>
                            <span class="pill-label">糖</span><span class="pill-label">鈉</span>
                        </div>
                        <div class="input-row">
                            <input type="text" placeholder="食物名稱">
                            <input type="number" placeholder=""><input type="number" placeholder="">
                            <input type="number" placeholder=""><input type="number" placeholder="">
                            <input type="number" placeholder=""><input type="number" placeholder="">
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary"><i class="fa-solid fa-camera"></i> 上傳圖片</button>
                            <div class="spacer"></div>
                            <button class="btn btn-danger"><i class="fa-solid fa-trash-can"></i> 刪除</button>
                            <button class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> 儲存</button>
                        </div>
                    </section>
                    
                    <!-- 營養素總覽 (Frame 3) -->
                    <section class="nutrient-summary">
                        <h3 class="price-title">今日累積攝取</h3>
                        <div class="nutrient-pills">
                            <span class="pill-label">熱量</span><span class="pill-label">碳水化合物</span>
                            <span class="pill-label">蛋白質</span><span class="pill-label">脂肪</span>
                            <span class="pill-label">糖</span><span class="pill-label">鈉</span>
                        </div>
                        <div class="summary-values">
                            <div class="summary-value"><p>930</p><p>大卡</p></div>
                            <div class="summary-value"><p>130</p><p>公克</p></div>
                            <div class="summary-value"><p>31</p><p>公克</p></div>
                            <div class="summary-value"><p>25</p><p>公克</p></div>
                            <div class="summary-value"><p>50</p><p>公克</p></div>
                            <div class="summary-value"><p>1020</p><p>毫克</p></div>
                        </div>
                    </section>
                    <!-- 飲食細節列表 -->
                    <section class="food-entry-list">
                        <div class="food-entry">
                            <div class="entry-title">便當</div>
                            <div class="entry-nutrients">
                                <div class="entry-nutrient"><p>374</p><p>大卡</p></div>
                                <div class="entry-nutrient"><p>51</p><p>公克</p></div>
                                <div class="entry-nutrient"><p>18</p><p>公克</p></div>
                                <div class="entry-nutrient"><p>10</p><p>公克</p></div>
                                <div class="entry-nutrient"><p>4</p><p>公克</p></div>
                                <div class="entry-nutrient"><p>577</p><p>毫克</p></div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- 4. 收藏列表頁 (Frame 4) -->
        <!-- ======================================================= -->
        <section class="page-section" id="favorite-page">
            <section class="favorite-filter">
                <div class="filter-input-group">
                    <label for="collection-select">收藏分類</label>
                    <select id="collection-select">
                        <option value="all">所有</option>
                        <option value="thai">泰式</option>
                        <option value="sushi">日式壽司</option>
                    </select>
                    <input type="text" placeholder="搜尋您的收藏" class="large-filter-input">
                </div>
            </section>

            <!-- 收藏列表容器 (將由 JS 動態填充) -->
            <section class="store-list" id="favorite-list-container" style="margin-top: 30px;">
                <!-- JS 將在此處插入動態生成的收藏店家卡片或空列表提示 -->
            </section>
        </section>
    </main>

    <script>
        // 模擬的店家資料 (已更新 descriptions)
        const storeData = [
            { id: 1, name: '九湯屋日式拉麵 逢甲店', rating: '★★★★☆ 4.0', priceRange: '$ 1 ~ 200', priceMeta: '$', distance: '0.8 km', heroImg: 'placeholder-store-1.jpg', description: '九湯屋日式拉麵 逢甲店', address: '臺中市西屯區某條巷子1號', menu: [{name: '豚骨拉麵', price: '$150'}, {name: '味噌拉麵', price: '$140'}, {name: '地獄拉麵', price: '$160'}] },
            { id: 2, name: '泰壽司-西屯熱門美食', rating: '★★★★☆ 4.5', priceRange: '$ 200 ~ 400', priceMeta: '$$', distance: '1.1 km', heroImg: 'placeholder-store-4.jpg', description: '泰壽司-西屯熱門美食 | 烏龍麵 | 握壽司 | 好吃的湯 | 平價日料 | 台中美食 | 日本料理 | 台中美食地圖 | restaurants | Seafood | Cheap eats', address: '407792臺中市西屯區文華路138巷5號', menu: [{name: '鮭魚丼飯', price: '$275'}, {name: '綜合刺身', price: '$350'}, {name: '炸蝦天婦羅', price: '$180'}] },
            { id: 3, name: '麥當勞-台中河南店', rating: '★★★★★ 4.8', priceRange: '$ 1 ~ 200', priceMeta: '$', distance: '1.0 km', heroImg: 'placeholder-store-2.jpg', description: '麥當勞-台中河南店', address: '臺中市西屯區河南路二段XX號', menu: [{name: '大麥克套餐', price: '$159'}, {name: '麥克雞塊', price: '$100'}, {name: '冰炫風', price: '$65'}] },
            { id: 4, name: '力軒屋', rating: '★★★★☆ 4.2', priceRange: '$ 1 ~ 200', priceMeta: '$', distance: '0.8 km', heroImg: 'placeholder-store-3.jpg', description: '力軒屋', address: '臺中市西屯區福星路某巷10號', menu: [{name: '滷肉飯', price: '$50'}, {name: '排骨便當', price: '$90'}, {name: '麻油雞湯', price: '$130'}] },
        ];

        // 收藏狀態變數 (儲存 ID)
        let favorites = []; 
        // 追蹤當前正在瀏覽的店家 ID
        let currentStoreId = null; 


        // 頁面切換邏輯
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-item');
            const pageSections = document.querySelectorAll('.page-section');
            const followIcon = document.getElementById('follow-icon'); 
            const categoryButtons = document.querySelectorAll('.category-filters .filter-btn');
            const priceButtons = document.querySelectorAll('.price-filters .filter-btn');
            const vegetarianToggle = document.getElementById('vegetarian-toggle');
            const resetFiltersButton = document.getElementById('reset-filters');
            const storeListContainer = document.getElementById('store-list-container');


            // 預設頁面設定
            setActivePage('search-page', 'nav-search');
            renderStoreList(storeData); // 初次載入店家列表

            function setActivePage(targetId, navId, storeId = null) {
                // 隱藏所有頁面
                pageSections.forEach(section => section.classList.remove('active'));
                // 顯示目標頁面
                const targetSection = document.getElementById(targetId);
                if (targetSection) targetSection.classList.add('active');

                // 更新導覽列選中狀態
                navLinks.forEach(link => link.classList.remove('selected'));
                const navElement = document.getElementById(navId);
                if (navElement) navElement.classList.add('selected');

                // 特殊頁面渲染邏輯
                if (targetId === 'store-detail-page' && storeId !== null) {
                    const store = storeData.find(s => s.id === storeId);
                    if (store) {
                        currentStoreId = storeId; // 更新當前店家 ID
                        renderStoreDetail(store);
                    }
                } else if (targetId === 'favorite-page') {
                    renderFavorites(); // 渲染收藏列表
                }
            }
            
            // --- 重置按鈕功能 ---
            function resetAllFilters() {
                // 1. 重置類別按鈕
                categoryButtons.forEach(button => {
                    button.classList.remove('selected');
                });

                // 2. 重置價格按鈕
                priceButtons.forEach(button => {
                    button.classList.remove('selected');
                });
                
                console.log("分類及價格篩選條件已重置。");
                renderStoreList(storeData);
            }
            
            resetFiltersButton.addEventListener('click', resetAllFilters);


            // --- 搜尋頁面功能 ---

            // 1. 渲染店家列表
            function renderStoreList(stores) {
                storeListContainer.innerHTML = '';
                stores.forEach(store => {
                    const card = document.createElement('a');
                    card.href = '#';
                    card.classList.add('store-card', 'store-link');
                    card.setAttribute('data-store-id', store.id);
                    
                    card.innerHTML = `
                        <img src="${store.heroImg}" alt="${store.name}">
                        <div class="store-info">
                            <p class="store-name">${store.name}</p>
                            <span class="distance">${store.distance}</span>
                        </div>
                        <div class="store-rating">
                            <span class="stars">${store.rating.split(' ')[0]}</span>
                            <span class="price-range">${store.priceRange}</span>
                        </div>
                    `;
                    storeListContainer.appendChild(card);
                });
                
                // 重新綁定店家卡片點擊事件 (因為 DOM 已經改變)
                document.querySelectorAll('.store-link').forEach(link => {
                    link.addEventListener('click', handleStoreLinkClick);
                });
            }

            // 2. 處理店家卡片點擊事件 (Frame 1 -> Frame 2)
            function handleStoreLinkClick(e) {
                e.preventDefault();
                const storeId = parseInt(this.getAttribute('data-store-id'));
                setActivePage('store-detail-page', 'nav-search', storeId);
            }


            // 3. 渲染店家詳情頁 (Frame 2)
            function renderStoreDetail(store) {
                // 填充基本資訊
                document.getElementById('detail-hero-img').src = store.heroImg;
                document.getElementById('detail-hero-img').alt = store.name;
                document.getElementById('detail-description').textContent = store.description;

                const starRating = store.rating.split(' ')[0];
                const metaText = `${starRating} ${store.rating.split(' ')[1] || ''}`;

                document.getElementById('detail-rating-stars').innerHTML = `<i class="fa-solid fa-star"></i> ${metaText}`;
                document.getElementById('detail-price-meta').textContent = store.priceMeta;
                document.getElementById('detail-distance').textContent = store.distance;
                document.getElementById('detail-address').textContent = store.address;

                // 填充菜單預覽
                const menuContainer = document.getElementById('detail-menu-cards');
                menuContainer.innerHTML = '';

                store.menu.forEach((item, index) => {
                    const placeholderImg = index % 3 === 0 ? 'dish-1.jpg' : (index % 3 === 1 ? 'dish-2.jpg' : 'dish-3.jpg');
                    const menuCard = document.createElement('div');
                    menuCard.classList.add('menu-card');
                    menuCard.innerHTML = `
                        <img src="${placeholderImg}" alt="${item.name}">
                        <p>${item.name}</p>
                        <span>${item.price}</span>
                    `;
                    menuContainer.appendChild(menuCard);
                });
                
                // 設置愛心圖標的初始狀態
                const isFavorited = favorites.includes(store.id);
                if (followIcon) {
                    if (isFavorited) {
                        followIcon.classList.remove('fa-regular');
                        followIcon.classList.add('fa-solid', 'followed');
                    } else {
                        followIcon.classList.remove('fa-solid', 'followed');
                        followIcon.classList.add('fa-regular');
                    }
                }
            }

            // 4. 渲染收藏列表 (Frame 4)
            function renderFavorites() {
                const container = document.getElementById('favorite-list-container');
                const filteredStores = storeData.filter(store => favorites.includes(store.id));
                container.innerHTML = '';
                
                if (filteredStores.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 40px 0;">您的收藏列表是空的。</p>';
                    return;
                }

                filteredStores.forEach(store => {
                    const card = document.createElement('div');
                    card.classList.add('store-card');
                    
                    card.innerHTML = `
                        <img src="${store.heroImg}" alt="${store.name}">
                        <div class="store-info">
                            <p class="store-name">${store.name}</p>
                            <span class="distance">${store.distance}</span>
                        </div>
                        <div class="store-rating">
                            <span class="stars">${store.rating.split(' ')[0]}</span>
                            <span class="price-range">${store.priceRange}</span>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }


            // --- 互動功能 ---

            // 導覽列點擊事件
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetPage = link.getAttribute('data-page');
                    setActivePage(targetPage, link.id);
                });
            });

            // 追蹤圖標點擊事件 (愛心切換 & 不跳轉)
            if (followIcon) {
                followIcon.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    if (currentStoreId === null) return; // 確保有店家 ID

                    if (followIcon.classList.contains('fa-regular')) {
                        // 空心 -> 實心 (收藏)
                        favorites.push(currentStoreId);
                        followIcon.classList.remove('fa-regular');
                        followIcon.classList.add('fa-solid', 'followed');
                        console.log(`店家 ${currentStoreId} 已收藏。當前收藏:`, favorites);
                    } else {
                        // 實心 -> 空心 (取消收藏)
                        favorites = favorites.filter(id => id !== currentStoreId);
                        followIcon.classList.remove('fa-solid', 'followed');
                        followIcon.classList.add('fa-regular');
                        console.log(`店家 ${currentStoreId} 已取消收藏。當前收藏:`, favorites);
                    }
                });
            }


            // 類別按鈕點擊事件 (多選切換)
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.toggle('selected');
                    console.log(`類別按鈕 ${button.textContent} 狀態切換.`);
                });
            });

            // 價格按鈕點擊事件 (單選切換) - 允許都不選
            priceButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const isSelected = button.classList.contains('selected');
                    priceButtons.forEach(btn => btn.classList.remove('selected'));
                    
                    if (!isSelected) {
                        button.classList.add('selected');
                        console.log(`價格按鈕 ${button.textContent} 被選中.`);
                    } else {
                        console.log(`價格按鈕 ${button.textContent} 被取消選中.`);
                    }
                });
            });
        });

        // 飲食輸入表單切換邏輯 (Frame 3/5)
        function toggleForm(formId) {
            const form = document.getElementById(formId);
            if (form) {
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
            }
        }
    </script>
</body>
</html>